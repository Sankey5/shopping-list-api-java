<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org" xmlns:hx-on="http://www.w3.org/1999/xhtml">
    <form th:fragment="addRecipe" hx-post="/recipes"
          hx-swap="outerHTML"
          hx-target="#recipe-form"
          hx-ext="json-enc-custom">
        <label>
            Recipe Name:
            <input required type="text" name="name">
        </label>
        <table>
            <thead>
                <th>Ingredient Name</th>
                <th>Quantity</th>
                <th>Measure</th>
            </thead>
            <tbody>
                <tr th:fragment="singleRecipeInput" th:each="num : ${#numbers.sequence(start, entries)}">
                    <td>
                        <input type="text" th:name="|groceryItems[${num}][name]|" >
                    </td>
                    <td>
                        <input type="text" th:name="|groceryItems[${num}][quantity]|">
                    </td>
                    <td>
                        <input list="measures" th:name="|groceryItems[${num}][measure]|">
                    </td>
                    <td>
                        <button type="button"
                                hx-on:click="deleteRecipeInputField(event);"
                                class="btn btn-sm btn-danger">X</button>
                    </td>
                </tr>
            </tbody>
        </table>
        <datalist id="measures">
            <option value="cup">Cup</option>
            <option value="oz">Ounce</option>
            <option value="lbs">Pound</option>
            <option value="tbps">Tablespoon</option>
            <option value="tps">Teaspoon</option>
        </datalist>

        <button type="submit" class="btn btn-primary">Create Recipe</button>
        <button type="button"
                hx-get="/home/add-recipe"
                hx-target="#recipe-form tbody tr"
                hx-swap="afterend"
                hx-on:htmx:config-request="event.detail.parameters.recipeCount = getNumRecipeFormInputs();"
                class="btn btn-secondary">Add Recipe Item</button>
        <button hx-on:click="deleteRecipeForm()" class="btn btn-danger">Exit Recipe Creation</button>
    </form>
</html>